<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <title>Query encoding / Rust</title>

   <link rel="icon" href="/autumn/favicon.png">
   <link rel="stylesheet" href="/autumn/main.css">
</head>
<body>
   <header class="page">

      <h2><a href="/autumn">Autumn</a></h2>

      <a href="/autumn/categories">Categories</a>
      <a href="/autumn/tags">Tags</a>
      <a href="https://github.com/89z/autumn">Repository</a>
   </header>
   <main class="page">

<h1>
   <a href="/autumn/query-encoding/">Query encoding</a> / Rust
</h1>
<section class="page">
   <time>Sun Jan 31 2021</time>
   
   <a href="/autumn/categories/path/">path</a>
   
</section>
   


   


<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rs" data-lang="rs"><span style="color:#66d9ef">use</span> url::Url;
 
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">print_fields</span>(url: <span style="color:#a6e22e">Url</span>) -&gt; () {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;scheme: {}&#34;</span>, url.scheme());
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;username: {}&#34;</span>, url.username());
 
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(password) <span style="color:#f92672">=</span> url.password() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;password: {}&#34;</span>, password);
    }
 
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(domain) <span style="color:#f92672">=</span> url.domain() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;domain: {}&#34;</span>, domain);
    }
 
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(port) <span style="color:#f92672">=</span> url.port() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;port: {}&#34;</span>, port);
    }
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;path: {}&#34;</span>, url.path());
 
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(query) <span style="color:#f92672">=</span> url.query() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;query: {}&#34;</span>, query);
    }
 
    <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> Some(fragment) <span style="color:#f92672">=</span> url.fragment() {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;fragment: {}&#34;</span>, fragment);
    }
}
<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">let</span> urls <span style="color:#f92672">=</span> vec<span style="color:#f92672">!</span>[
        <span style="color:#e6db74">&#34;foo://example.com:8042/over/there?name=ferret#nose&#34;</span>,
        <span style="color:#e6db74">&#34;urn:example:animal:ferret:nose&#34;</span>,
        <span style="color:#e6db74">&#34;jdbc:mysql://test_user:ouupppssss@localhost:3306/sakila?profileSQL=true&#34;</span>,
        <span style="color:#e6db74">&#34;ftp://ftp.is.co.za/rfc/rfc1808.txt&#34;</span>,
        <span style="color:#e6db74">&#34;http://www.ietf.org/rfc/rfc2396.txt#header1&#34;</span>,
        <span style="color:#e6db74">&#34;ldap://[2001:db8::7]/c=GB?objectClass=one&amp;objectClass=two&#34;</span>,
        <span style="color:#e6db74">&#34;mailto:John.Doe@example.com&#34;</span>,
        <span style="color:#e6db74">&#34;news:comp.infosystems.www.servers.unix&#34;</span>,
        <span style="color:#e6db74">&#34;tel:+1-816-555-1212&#34;</span>,
        <span style="color:#e6db74">&#34;telnet://192.0.2.16:80/&#34;</span>,
        <span style="color:#e6db74">&#34;urn:oasis:names:specification:docbook:dtd:xml:4.1.2&#34;</span>,
        <span style="color:#e6db74">&#34;ssh://alice@example.com&#34;</span>,
        <span style="color:#e6db74">&#34;https://bob:pass@example.com/place&#34;</span>,
        <span style="color:#e6db74">&#34;http://example.com/?a=1&amp;b=2+2&amp;c=3&amp;c=4&amp;d=%65%6e%63%6F%64%65%64&#34;</span>,
    ];
 
    <span style="color:#66d9ef">for</span> url <span style="color:#66d9ef">in</span> urls {
        println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Parsing {}&#34;</span>, url);
        <span style="color:#66d9ef">match</span> Url::parse(url) {
            Ok(valid_url) <span style="color:#f92672">=&gt;</span> {
                print_fields(valid_url);
                println<span style="color:#f92672">!</span>();
            }
            Err(e) <span style="color:#f92672">=&gt;</span> println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;Error Parsing url - {:?}&#34;</span>, e),
        }
    }
}
</code></pre></div>

<ul>
<li><a href="https://docs.rs/url/latest/url/struct.Url.html#method.query">https://docs.rs/url/latest/url/struct.Url.html#method.query</a></li>
<li><a href="//github.com/servo/rust-url/issues/671">get_query</a></li>
</ul>
<h2 id="references">References</h2>
<p><a href="https://rosettacode.org/wiki/URL_parser">https://rosettacode.org/wiki/URL_parser</a></p>

</main>

</body>
</html>
